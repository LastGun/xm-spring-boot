(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d4b08d4"],{"365c":function(t,e,n){"use strict";n.d(e,"Q",(function(){return c})),n.d(e,"H",(function(){return i})),n.d(e,"U",(function(){return o})),n.d(e,"ab",(function(){return a})),n.d(e,"bb",(function(){return s})),n.d(e,"h",(function(){return l})),n.d(e,"Y",(function(){return u})),n.d(e,"O",(function(){return d})),n.d(e,"g",(function(){return h})),n.d(e,"A",(function(){return f})),n.d(e,"C",(function(){return m})),n.d(e,"s",(function(){return b})),n.d(e,"q",(function(){return p})),n.d(e,"R",(function(){return g})),n.d(e,"T",(function(){return y})),n.d(e,"c",(function(){return v})),n.d(e,"v",(function(){return O})),n.d(e,"l",(function(){return j})),n.d(e,"E",(function(){return w})),n.d(e,"L",(function(){return D})),n.d(e,"f",(function(){return k})),n.d(e,"y",(function(){return C})),n.d(e,"X",(function(){return F})),n.d(e,"z",(function(){return x})),n.d(e,"p",(function(){return S})),n.d(e,"D",(function(){return T})),n.d(e,"d",(function(){return A})),n.d(e,"w",(function(){return B})),n.d(e,"n",(function(){return I})),n.d(e,"J",(function(){return z})),n.d(e,"M",(function(){return P})),n.d(e,"m",(function(){return $})),n.d(e,"i",(function(){return _})),n.d(e,"I",(function(){return L})),n.d(e,"K",(function(){return M})),n.d(e,"e",(function(){return R})),n.d(e,"x",(function(){return J})),n.d(e,"V",(function(){return N})),n.d(e,"W",(function(){return q})),n.d(e,"o",(function(){return E})),n.d(e,"P",(function(){return G})),n.d(e,"S",(function(){return U})),n.d(e,"b",(function(){return H})),n.d(e,"u",(function(){return K})),n.d(e,"k",(function(){return Q})),n.d(e,"G",(function(){return V})),n.d(e,"F",(function(){return W})),n.d(e,"a",(function(){return X})),n.d(e,"t",(function(){return Y})),n.d(e,"Z",(function(){return Z})),n.d(e,"B",(function(){return tt})),n.d(e,"r",(function(){return et})),n.d(e,"j",(function(){return nt})),n.d(e,"N",(function(){return rt}));var r=n("7f80"),c=function(t){return Object(r["b"])("/common/captcha/init")},i=function(t,e){return Object(r["b"])("/common/captcha/draw/".concat(t))},o=function(t){return Object(r["c"])("/login",t)},a=function(t){return Object(r["b"])("/user/info",t)},s=function(t){return Object(r["c"])("/user/edit",t)},l=function(t){return Object(r["c"])("/user/modifyPass",t)},u=function(t){return Object(r["c"])("/user/unlock",t)},d=function(t){return Object(r["b"])("/user/getByCondition",t)},h=function(t){return Object(r["c"])("/user/admin/add",t)},f=function(t){return Object(r["c"])("/user/admin/edit",t)},m=function(t,e){return Object(r["c"])("/user/admin/enable/".concat(t),e)},b=function(t,e){return Object(r["c"])("/user/admin/disable/".concat(t),e)},p=function(t,e){return Object(r["a"])("/user/delByIds/".concat(t),e)},g=function(t){return Object(r["b"])("/department/getByParentId/0",t)},y=function(t,e){return Object(r["b"])("/department/getByParentId/".concat(t),e)},v=function(t){return Object(r["c"])("/department/add",t)},O=function(t){return Object(r["c"])("/department/edit",t)},j=function(t,e){return Object(r["a"])("/department/delByIds/".concat(t),e)},w=function(t){return Object(r["b"])("/role/getAllList",t)},D=function(t){return Object(r["b"])("/role/getAllByPage",t)},k=function(t){return Object(r["c"])("/role/save",t)},C=function(t){return Object(r["c"])("/role/edit",t)},F=function(t){return Object(r["c"])("/role/setDefault",t)},x=function(t,e){return Object(r["c"])("/role/editRolePerm/".concat(t),e)},S=function(t,e){return Object(r["a"])("/role/delAllByIds/".concat(t),e)},T=function(t){return Object(r["b"])("/permission/getAllList",t)},A=function(t){return Object(r["c"])("/permission/add",t)},B=function(t){return Object(r["c"])("/permission/edit",t)},I=function(t,e){return Object(r["a"])("/permission/delByIds/".concat(t),e)},z=function(t){return Object(r["b"])("/log/getAllByPage",t)},P=function(t){return Object(r["b"])("/log/search",t)},$=function(t,e){return Object(r["a"])("/log/delByIds/".concat(t),e)},_=function(t){return Object(r["a"])("/log/delAll",t)},L=function(){return Object(r["b"])("/home/statistics")},M=function(t){return Object(r["b"])("/quartzJob/getAllByPage",t)},R=function(t){return Object(r["c"])("/quartzJob/add",t)},J=function(t){return Object(r["c"])("/quartzJob/edit",t)},N=function(t){return Object(r["c"])("/quartzJob/pause",t)},q=function(t){return Object(r["c"])("/quartzJob/resume",t)},E=function(t,e){return Object(r["a"])("/quartzJob/delByIds/".concat(t),e)},G=function(t){return Object(r["b"])("/article/category/getByParentId/0",t)},U=function(t,e){return Object(r["b"])("/article/category/getByParentId/".concat(t),e)},H=function(t){return Object(r["c"])("/article/category/add",t)},K=function(t){return Object(r["c"])("/article/category/edit",t)},Q=function(t,e){return Object(r["a"])("/article/category/delByIds/".concat(t),e)},V=function(t){return Object(r["b"])("/article/getByCondition",t)},W=function(t){return Object(r["b"])("/article/detail/".concat(t))},X=function(t){return Object(r["c"])("/article/add",t)},Y=function(t){return Object(r["c"])("/article/edit",t)},Z="/skeleton/upload/articleThumb",tt=function(t,e){return Object(r["c"])("/article/enable/".concat(t),e)},et=function(t,e){return Object(r["c"])("/article/disable/".concat(t),e)},nt=function(t,e){return Object(r["a"])("/article/delByIds/".concat(t),e)},rt=function(){return Object(r["b"])("/upload/getDomain")}},e007:function(t,e,n){"use strict";var r=n("ef88"),c=n.n(r);c.a},e8b1:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("Row",[n("Col",[n("Card",[n("Row",[n("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:t.searchForm,inline:"","label-width":70}},[n("Form-item",{attrs:{label:"标题",prop:"title"}},[n("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入文章标题"},model:{value:t.searchForm.title,callback:function(e){t.$set(t.searchForm,"title",e)},expression:"searchForm.title"}})],1),n("Form-item",{attrs:{label:"是否展示",prop:"status"}},[n("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择是否展示",clearable:""},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[n("Option",{attrs:{value:"0"}},[t._v("否")]),n("Option",{attrs:{value:"1"}},[t._v("是")])],1)],1),n("Form-item",{attrs:{label:"分类",prop:"category"}},[n("Cascader",{staticStyle:{width:"200px"},attrs:{data:t.category,"load-data":t.loadData,"change-on-select":"",filterable:"",placeholder:"请选择或输入搜索分类"},on:{"on-change":t.handleChangeDep},model:{value:t.selectDep,callback:function(e){t.selectDep=e},expression:"selectDep"}})],1),n("Form-item",{attrs:{label:"创建时间"}},[n("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",format:"yyyy-MM-dd",clearable:"",placeholder:"选择起始时间"},on:{"on-change":t.selectDateRange},model:{value:t.selectDate,callback:function(e){t.selectDate=e},expression:"selectDate"}})],1),n("Form-item",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[n("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.handleSearch}},[t._v("搜索")]),n("Button",{on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),n("Row",{staticClass:"operation"},[n("Button",{directives:[{name:"has",rawName:"v-has",value:"add",expression:"'add'"}],attrs:{type:"primary",icon:"md-add"},on:{click:t.add}},[t._v("新增文章")]),n("Button",{directives:[{name:"has",rawName:"v-has",value:"delete",expression:"'delete'"}],attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")]),n("Dropdown",{on:{"on-click":t.handleDropdown}},[n("Button",[t._v("\n                            更多操作\n                            "),n("Icon",{attrs:{type:"md-arrow-dropdown"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{attrs:{name:"refresh"}},[t._v("刷新")]),n("DropdownItem",{attrs:{name:"exportData"}},[t._v("导出所选数据")])],1)],1),n("Dropdown",{staticStyle:{float:"right"},on:{"on-click":t.handleDropdown}},[n("Button",[t._v("\n                            设置显示列\n                            "),n("Icon",{attrs:{type:"md-arrow-dropdown"}})],1),n("DropdownMenu",{staticStyle:{padding:"10px"},attrs:{slot:"list"},slot:"list"},[n("Checkbox-group",{on:{"on-change":t.changeTableColumns},model:{value:t.tableColumnsChecked,callback:function(e){t.tableColumnsChecked=e},expression:"tableColumnsChecked"}},t._l(t.allColumns,(function(e){return n("Checkbox",{attrs:{label:e.key}},[t._v(t._s(e.title))])})),1)],1)],1)],1),n("Row",[n("Alert",{attrs:{"show-icon":""}},[t._v("\n                        已选择 "),n("span",{staticClass:"select-count"},[t._v(t._s(t.selectCount))]),t._v(" 项\n                        "),n("a",{staticClass:"select-clear",on:{click:t.clearSelectAll}},[t._v("清空")])])],1),n("Row",[n("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,sortable:"custom"},on:{"on-sort-change":t.changeSort,"on-selection-change":t.showSelect}}),n("Table",{ref:"exportTable",staticStyle:{display:"none"},attrs:{columns:t.columns,data:t.exportData}})],1),n("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[n("Page",{attrs:{current:t.searchForm.pageNumber,total:t.total,"page-size":t.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1)],1)],1)],1)},c=[],i=(n("ed63"),n("8cf2"),n("6d57"),n("f548"),n("365c")),o={name:"article-manage",data:function(){var t=this;return{accessToken:{},loading:!0,drop:!1,dropDownContent:"展开",dropDownIcon:"ios-arrow-down",selectCount:0,imageDomain:"",selectList:[],category:[],selectDep:[],dataDep:[],permTypes:[],tableColumnsChecked:["thumb","title","categoryTitle","status","createdAt"],searchForm:{title:"",content:"",status:null,startDate:"",endDate:"",summary:""},selectDate:null,modalType:0,columns:[],allColumns:[{title:"缩略图",key:"thumb",align:"center",render:function(e,n){return n.row.thumb?e("div",{attrs:{style:""}},[e("img",{props:{type:"primary",size:"small"},attrs:{src:t.imageDomain+n.row.thumb,style:"width: 90px;height: 90px;border-radius: 2px;"},style:"text-align:center;margin:3px auto;"})]):e("div","-")}},{title:"标题",key:"title",sortable:!0,align:"center"},{title:"简介",key:"summary",sortable:!0,align:"center",type:"html"},{title:"分类",key:"categoryTitle",align:"center",render:function(t,e){return""===e.row.categoryTitle?t("div","-"):t("div",e.row.categoryTitle)}},{title:"作者",key:"author",sortable:!0,align:"center"},{title:"是否展示",key:"status",align:"center",render:function(t,e){var n="";return 0===e.row.status?n="否":1===e.row.status&&(n="是"),t("div",n)},filters:[{label:"是",value:1},{label:"否",value:0}],filterMultiple:!1,filterMethod:function(t,e){return 0===t?0===e.status:1===t?1===e.status:void 0}},{title:"创建时间",key:"createdAt",sortable:!0,sortType:"desc",render:function(t,e){return t("div",e.row.createdAt.replace(/.[0-9]*$/,""))}}],data:[],exportData:[],total:0}},methods:{init:function(){this.accessToken={accessToken:this.getStore("accessToken")},this.changeTableColumns(),this.$refs.ueditor={},this.getImageBase(),this.initMeta(),this.initCategoryData(),this.getParentList(),this.getArticleList()},initMeta:function(){var t=this.$route.meta.permTypes;null!==t&&void 0!==t&&(this.permTypes=t)},changePage:function(t){this.searchForm.pageNumber=t,this.getArticleList(),this.clearSelectAll()},changePageSize:function(t){this.searchForm.pageSize=t,this.getArticleList()},selectDateRange:function(t){t&&(this.searchForm.startDate=t[0],this.searchForm.endDate=t[1])},getArticleList:function(){var t=this;this.loading=!0,Object(i["G"])(this.searchForm).then((function(e){t.loading=!1,!0===e.success&&(t.data=e.result.records,t.total=e.result.total)}))},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getArticleList()},handleReset:function(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.selectDate=null,this.searchForm.startDate="",this.searchForm.endDate="",this.searchForm.categoryId="",this.getArticleList()},changeSort:function(t){this.searchForm.sort=t.key,this.searchForm.order=t.order,"normal"===t.order&&(this.searchForm.order=""),this.getArticleList()},handleDropdown:function(t){var e=this;if("exportData"===t){if(this.selectCount<=0)return void this.$Message.warning("您还未选择要导出的数据");this.$Modal.confirm({title:"确认导出",content:"您确认要导出所选 "+this.selectCount+" 条数据?",onOk:function(){e.$refs.exportTable.exportCsv({filename:"文章数据"})}})}else"refresh"===t&&this.getArticleList()},add:function(){this.$router.push({name:"article_edit",query:{type:"add"}})},enable:function(t){var e=this;this.$Modal.confirm({title:"确认启用",content:"您确认要启用文章 "+t.title+" ?",onOk:function(){Object(i["B"])(t.id).then((function(t){!0===t.success&&(e.$Message.success("操作成功"),e.getArticleList())}))}})},disable:function(t){var e=this;this.$Modal.confirm({title:"确认禁用",content:"您确认要禁用文章 "+t.title+" ?",onOk:function(){Object(i["r"])(t.id).then((function(t){!0===t.success&&(e.$Message.success("操作成功"),e.getArticleList())}))}})},remove:function(t){var e=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除文章 "+t.title+" ?",onOk:function(){Object(i["j"])(t.id).then((function(t){!0===t.success&&(e.$Message.success("删除成功"),e.getArticleList())}))}})},dropDown:function(){this.drop?(this.dropDownContent="展开",this.dropDownIcon="ios-arrow-down"):(this.dropDownContent="收起",this.dropDownIcon="ios-arrow-up"),this.drop=!this.drop},showSelect:function(t){this.exportData=t,this.selectList=t,this.selectCount=t.length},clearSelectAll:function(){this.$refs.table.selectAll(!1)},delAll:function(){var t=this;this.selectCount<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectCount+" 条数据?",onOk:function(){var e="";t.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),Object(i["j"])(e).then((function(e){!0===e.success&&(t.$Message.success("删除成功"),t.clearSelectAll(),t.getArticleList())}))}})},initCategoryData:function(){var t=this;Object(i["S"])(0).then((function(e){!0===e.success&&(e.result.forEach((function(t){t.isParent?(t.value=t.id,t.label=t.title,t.loading=!1,t.children=[]):(t.value=t.id,t.label=t.title)})),t.category=e.result)}))},getParentList:function(){var t=this;Object(i["S"])(0).then((function(e){!0===e.success&&(e.result.forEach((function(t){t.isParent&&(t.loading=!1,t.children=[])})),t.dataDep=e.result)}))},loadData:function(t,e){t.loading=!0,Object(i["S"])(t.value).then((function(n){t.loading=!1,!0===n.success&&(n.result.forEach((function(t){t.isParent?(t.value=t.id,t.label=t.title,t.loading=!1,t.children=[]):(t.value=t.id,t.label=t.title),-1===t.status&&(t.label="[已禁用] "+t.label,t.disabled=!0)})),t.children=n.result,e())}))},loadDataTree:function(t,e){Object(i["S"])(t.id).then((function(t){!0===t.success&&(t.result.forEach((function(t){t.isParent&&(t.loading=!1,t.children=[])})),e(t.result))}))},selectTree:function(t){if(t.length>0){for(var e in t[0])null===t[0][e]&&(t[0][e]="");var n=JSON.stringify(t[0]),r=JSON.parse(n);this.articleForm.categoryId=r.id,this.articleForm.categoryTitle=r.title}},clearSelectDep:function(){this.articleForm.categoryId="",this.articleForm.categoryTitle=""},handleChangeDep:function(t,e){t&&t.length>0?this.searchForm.categoryId=t[t.length-1]:this.searchForm.categoryId=""},handleChangeUserFormDep:function(t,e){t&&t.length>0?this.articleForm.categoryId=t[t.length-1]:this.articleForm.categoryId=""},getImageBase:function(){var t=this;this.loading=!0,Object(i["N"])().then((function(e){t.loading=!1,!0===e.success&&(t.imageDomain=e.result)}))},changeTableColumns:function(){this.columns=this.getTableColumns()},getTableColumns:function(){var t=this,e=[],n={type:"selection",align:"center",fixed:"left"};e.push(n);var r={title:"操作",key:"action",align:"center",fixed:"right",render:function(e,n){var r,c,i,o;return t.permTypes.includes("edit")&&(r=e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){var e=n.row.id;t.$router.push({name:"article_edit",query:{type:"edit",id:e}})}}},"编辑")),t.permTypes.includes("enable")&&(i=e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.enable(n.row)}}},"启用")),t.permTypes.includes("disable")&&(c=e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.disable(n.row)}}},"禁用")),t.permTypes.includes("delete")&&(o=e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(n.row)}}},"删除")),1===n.row.status?e("div",[r,c,o]):e("div",[r,i,o])}},c=this;return this.allColumns.forEach((function(t){c.tableColumnsChecked.forEach((function(n){t.key===n&&e.push(t)}))})),e.push(r),e}},mounted:function(){this.init()}},a=o,s=(n("e007"),n("623f")),l=Object(s["a"])(a,r,c,!1,null,null,null);e["default"]=l.exports},ef88:function(t,e,n){}}]);